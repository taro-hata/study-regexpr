# 正規表現
正規表現（せいきひょうげん、英: regular expression）は、文字列の集合を一つの文字列で表現する方法の一つである、とあります。Wikipediaより。
プログラマーの観点からみると、正規表現を理解していると、以下のような点で有用です。
1. grepを使ったソースコードの調査
1. 文字列を扱うプログラムの作成
1. データベース

本資料は、正規表現について大雑把に説明します。

実際には、ネット上の情報を見るのが早道なので、
まず有用なリンクを示します。

### リンク
1. 正規表現の動きを絵で表示
https://regexper.com/
1. 正規表現のサンプル
https://www.megasoft.co.jp/mifes/seiki/
1. 先読みと後読みのわかりやすい説明
https://www.javadrive.jp/regex-basic/writing/index2.html

以降、簡単な説明の後、練習問題と続きます。

### 文字
|文字|説明|正規表現の例|マッチする例<br>太字部分|マッチしない例|
|:-:|:-|:-:|:-:|:-:|
|.|任意の１文字 |.|**A**<br>**あ**|
|\w|英数字と_|\w|
|\W|上の逆|\W|
|\d|数字|\d|
|\D|上の逆|\D|
|\s|空白文字<br>詳細は自分で調べて|\s|
|\S|上の逆|\S|
|[...]|いずれかの文字1|[AB]|**AB**CD|
|[...]|いずれかの文字2|[A..C]|**ABC**D|
|[^...]|いずれかの文字以外|[^A..C]|ABC**D**|
|(...)|グループ化1|(ABC)+|**ABCABC**|
|(...\|...)|グループ化2<br>OR|(ABC\|DEF)|**ABC**123**DEF**|
<br>
### 位置
|文字|説明|正規表現の例|マッチする例<br>太字部分|マッチしない例|
|:-:|:-|:-:|:-:|:-:|
|^|行の先頭|^A|**A**AAA|BA|
|$|行の先頭|A$|AAA**A**|AB|
|\\b|単語の先頭か末尾|\\bABC|123 **ABC**ABC|123ABC|
|\\d|数字|\d|**123**ABC|ABC|
|\\w|数字/アルファベット/_|\w|###**123**###**ABC_**###||
<br>
### 繰り返し
|文字|説明|正規表現の例|マッチする例<br>太字部分|マッチしない例|
|:-:|:-|:-:|:-:|:-:|
|*|直前の文字の0文字以上の繰り返し|AB*C|**AC**<br>**AB**<br>**ABBC**||
|+|直前の文字の1文字以上の繰り返し|AB+C|**ABC**<br>**ABBC**|AC|
|?|直前の文字の0または1文字以上の繰り返し|AB?C|**AC**<br>**ABC**|ABBC||
|{n}|直前の文字のn文字の繰り返し|AB{2}C|**ABBC**<br>|ABC<br>AC|
|{n,}|直前の文字のn文字以上の繰り返し|AB{1}C|**ABC**<br>**ABBC**|AC|
|{n,m}|直前の文字のn文字以上の繰り返し|AB{1,2}C|**ABC**<br>**ABBC**|AC<br>ABBBC|
|通常|最長一致|AB*|**ABBBB**C||
|?|最短一致<br>繰り返し演算子の直後につける|AB*?|**AB**BBBC||
<br>
### 先読み・あと読み
|文字|説明|正規表現の例|マッチする例<br>太字部分|マッチしない例|
|:-:|:-|:-:|:-:|:-:|
|(?=...)|先読み肯定|東京(?=都)|東京 **東京**都|
|(?!...)|先読み否定|東京(?!都)|**東京** 東京都|
|(?<=...)|後読み肯定|(?<=0x)ff|123 0x**ff**|
|(?<!...)|後読み否定|(?<!0x)22|**22** 0x22|
<br>
### 置換(後方参照)
グループ化したものを、\$1,\$2といった形で参照できる。
|文字|説明|検索文字|置換文字|対象文字列|置換結果|
|:-:|:-|:-:|:-:|:-:|:-:|
|\$1,\$2|後方参照|(\w+) (\w+)|\$2 \$1|ABC DEF|DEF ABC|


### 練習問題
1. 7桁の郵便番号xxxyyyyをxxx-yyyyに置換する
1. c言語コードの、8進数で記述している箇所を検索で見つける
1. c言語コードの、変数 value にセットしている箇所を見つける
1. c言語コードの、enum変数 valueに数値(1とか0x02とか)をセットしている箇所を検索で見つける
1. 0-9,A-Z,a-fを検索で見つける(なるべく短い正規表現で)
1. c言語コードの、判定分(if,else,while,for,case)の数を数える

